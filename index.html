<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>menu</title>
    <link rel="stylesheet" href="css/theme.css"/>
</head>

<style>
    body {
        background: url(https://liuyao_cool.gitee.io/jslib/img/background.gif);
        background-size: contain;
    }
    body::before {
        content: ' ';
        background-color: #0000009e;
        /* background: url("img/background.gif"); */
        /* background-size: contain; */
        /* display: block; */
        position: absolute;
        top: 0px;
        left: 0px;
        bottom: 0px;
        right: 0px;
        /*pointer-events: none;*/
        z-index: -1;
    }
    body::after {
        content: ' ';
        background: url("https://liuyao_cool.gitee.io/jslib/img/party_parrot.gif");
        width: 28px;
        height: 28px;
        display: block;
        background-size: cover;
        position: fixed;
        bottom: 10px;
        right: 10px;
    }
    ul {
        width: fit-content;
        padding: 20px 25px;
    }
    iframe {
        width: calc(100% - 206px);
        height: 100%;
        position: absolute;
        border: none;
        top: 0;
        right: 0;
    }
    div li {
        padding-left: 16px;
    }
    ul > li {
        font-size: 18px;
    }
</style>
<body>

<ul>
    <li><a target="main" href="html/qrcode/main.html">二维码</a></li>
    <li><a href="javascript:showMenu('demo')">demo</a></li>
    <div style="display:none;" id="demo">
        <li><a target="main" href="html/demo/button/menu.html">按钮样式</a></li>
        <li><a target="main" href="html/demo/heart.html">心</a></li>
        <li><a target="main" href="html/demo/box-shadow.html">box 阴影</a></li>
    </div>
    <li><a href="javascript:showMenu('canvas')">canvas demo</a></li>
    <div style="display:none;" id="canvas">
        <li><a target="main" href="html/demo/canvas/circle1.html">circle1</a></li>
        <li><a target="main" href="html/demo/canvas/circle2.html">circle2</a></li>
        <li><a target="main" href="html/demo/canvas/circle3.html">circle3</a></li>
        <li><a target="main" href="html/demo/canvas/electric.html">electric</a></li>
        <li><a target="main" href="html/demo/canvas/flower2.html">flower</a></li>
        <li><a target="main" href="html/demo/canvas/flowllines.html">flow lines</a></li>
        <li><a target="main" href="html/demo/canvas/flowpoint.html">flow point</a></li>
        <li><a target="main" href="html/demo/canvas/meteor.html">meteor</a></li>
        <li><a target="main" href="html/demo/canvas/polygon.html">polygon</a></li>
        <li><a target="main" href="html/demo/canvas/rgb.html">rgb</a></li>
        <li><a target="main" href="html/demo/canvas/star1.html">star</a></li>
        <li><a target="main" href="html/demo/canvas/Tunnel1.html">tunnel</a></li>
        <li><a target="main" href="html/demo/canvas/wave1.html">wave</a></li>
        <li><a target="main" href="html/demo/canvas/word.html">word1</a></li>
        <li><a target="main" href="html/demo/canvas/word2.html">word2</a></li>
        <li><a target="main" href="html/demo/canvas/word3.html">word3</a></li>
    </div>
    <li><a href="javascript:showMenu('util')">小工具</a></li>
    <div style="display:none;"  id="util">
        <li><a target="main" href="html/util/radix.html">进制转换</a></li>
        <li><a target="main" href="html/util/bezier.html">贝塞尔动画</a></li>
        <li><a target="main" href="html/util/ip.html">IP</a></li>
    </div>
    <li><a href="javascript:showMenu('device')">硬件工具</a></li>
    <div style="display:none;"  id="device">
        <li><a target="main" href="html/device/keyboard_check.html">键盘检测</a></li>
        <li><a target="main" href="html/device/videocard.html">显卡检测</a></li>
        <li><a target="main" href="html/device/videocard2.html">显卡检测2</a></li>
    </div>
    <li><a href="javascript:showMenu('network')">网络工具</a></li>
    <div style="display:none;"  id="network">
        <li><a target="main" href="html/network/m3u8.html">m3u8</a></li>
    </div>
    <li><a href="javascript:showMenu('video')">视频工具</a></li>
    <div style="display:none;"  id="video">
        <li><a target="main" href="html/video/player.html">视频播放</a></li>
        <li><a target="main" href="html/video/flvjs.html">flvjs流播放</a></li>
        <li><a target="main" href="html/video/screen_server.html">屏幕分享-分享端</a></li>
        <li><a target="main" href="html/video/screen_client.html">屏幕分享-接收端</a></li>
    </div>
    <li><a href="javascript:showMenu('datastructure')">数据结构</a></li>
    <div style="display:none;"  id="datastructure">
        <li><a target="main" href="html/datastructure/AVLTree.html">AVLTree</a></li>
        <li><a target="main" href="html/datastructure/BinarySearchTree.html">BinarySearchTree</a></li>
        <li><a target="main" href="html/datastructure/BPlusTree.html">B<sup>+</sup> Tree</a></li>
        <li><a target="main" href="html/datastructure/BTree.html">B Tree</a></li>
        <li><a target="main" href="html/datastructure/RedBlackTree.html">RedBlackTree</a></li>
    </div>
    <li><a href="javascript:showMenu('game')">游戏</a></li>
    <div style="display:none;"  id="game">
        <li><a target="main" href="html/game/magicCube/index.html">MagicCube</a></li>
    </div>
</ul>

<iframe src="" name="main"></iframe>

<script>
    function showMenu(id) {
        var sty = document.getElementById(id).style;
        sty.display = 'none' == sty.display ? '' : 'none';
    }
</script>

<script>
    const randInt = (min, max) => {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function germ(e, offsetX, offsetY) {
        let mouseX, mouseY;
        let event = e;
        if (!e) {
            event = window.event;
            mouseX = window.innerWidth/2;
            mouseY = window.innerHeight/2;
        }
        if (event && (event.pageX || event.pageY)) {
            mouseX = event.pageX;
            mouseY = event.pageY;
        }
        else if (event && (event.clientX || event.clientY))    {
            mouseX = event.clientX + document.body.scrollLeft
                + document.documentElement.scrollLeft;
            mouseY = event.clientY + document.body.scrollTop
                + document.documentElement.scrollTop;
        }

        mouseX += offsetX || 0;
        mouseY += offsetY || 0;

        console.log(`${mouseX}/${window.pageXOffset} : ${mouseY}/${window.pageYOffset }`);

        addGrem(mouseX, mouseY);
    }

    function addGrem(mouseX, mouseY) {
        let pp = '';
        for (let i=0; i<randInt(1,3); i++) {
            let x = 50;
            let y = 55;
            let w = randInt(5, 15);
            let h = randInt(2, 10);
            let d1 = `M ${x} ${y} q ${randInt(w/10, w/1.1)} ${h} ${w} 0`;
            let d2 = `M ${x} ${y + randInt(0,h)} q ${randInt(w/10, w/1.1)} -${h} ${w} 0`;
            let rot = randInt(0,360);
            let fadeOut = randInt(1500,2500);
            let sw = randInt(50, 200)/100;
            let p = `<g transform="rotate(${randInt(0,360)} 50 50)">
            <path d="${d1}" stroke="rgb(0, ${randInt(130, 255)}, ${randInt(0, 150)})" stroke-width="${sw}" fill="none" stroke-linecap="round" transform="rotate(${rot} ${x} ${y + 5})">
                <animate attributeName="d" values="${d1}; ${d2}; ${d1}" dur="${randInt(600,1500)}ms" begin="${randInt(-1500,-600)}ms" repeatCount="indefinite" keyTimes="0;${randInt(25, 75)/100};1" keySplines="${randInt(0,100)/100} ${randInt(0,100)/100} ${randInt(0,100)/100} ${randInt(0,100)/100}; ${randInt(0,100)/100} ${randInt(0,100)/100} ${randInt(0,100)/100} ${randInt(0,100)/100}" calcMode="spline" />
                <animateTransform attributeName="transform" attributeType="XML" type="rotate" values="${rot} ${x} ${y}; ${rot} ${x} ${y + randInt(10,25)}" dur="${fadeOut}ms" begin="0s" fill="freeze" repeatCount="none" />
                <animate attributeName="stroke-width" values="${sw}; 0" dur="${fadeOut}ms" begin="0s" fill="freeze" repeatCount="none" keyTimes="0;1" keySplines="0.75 0 0.75 0" calcMode="spline" />
                            </g>`;
            pp += p;
        }
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", "0 0 100 100");
        svg.setAttribute("style", `pointer-events: none;width: 100%; height: 100%; position: fixed; height: 100px; width: 100px; transform: translate(-50%,-50%); left: ${mouseX}px; top: ${mouseY}px; z-index: 99999`);
        svg.innerHTML = pp;
        document.body.appendChild(svg);
        setTimeout(() => {svg?.remove();}, 2500);
    }

    // document.addEventListener("mousemove", (event) => {germ(event)});
    // document.addEventListener("touchmove", (event) => {germ(event)});
    
    window.onpointermove = function(e) {
        addGrem(e.clientX, e.clientY);
    };

    let child = document.querySelector('iframe');
    child.addEventListener('load', ev => {
        child.contentWindow.onpointermove = function(e) {
            let r = child.getBoundingClientRect();
            addGrem(r.left + e.clientX, r.top + e.clientY);
        }
        // child.contentWindow.document.addEventListener("mousemove", (event) => {germ(event)});
        // child.contentWindow.document.addEventListener("touchmove", (event) => {germ(event)});
    });

</script>
</body>
</html>